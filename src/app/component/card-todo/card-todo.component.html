<!-- Card Todo Component -->
<div class="card todo">
    <div class="todo-container">
        <!-- State Indicator -->
        <div [class.expanded]="expanded()" class="indicator state-{{dataService.formatClassName(todoList.stateName)}}">
        </div>
        <div class="todo-inner-container">
            <!-- Expand/Collapse Arrow -->
            <span class="arrow-icon-container" (click)="expandWorkInside()">
                <mat-icon class="arrow-icon">
                    @if (!expanded()) { keyboard_arrow_right } @else { keyboard_arrow_down }
                </mat-icon>
            </span>

            <!-- Card Name -->
            <div class="card-name">
                <span>{{todoList.stateName}}</span>
                <div class="todo-count"><span>{{todoList.works.length}}</span></div>
            </div>

            <!-- Priority Section -->
            <div class="card-section">
                <!-- <span class="section-label">Priority</span> -->
                <div class="progress-bar-battery">
                    <!-- Priority Battery Items -->
                    @for (item of priorityBatteryItems; track $index) {
                    <div class="progress-fill-battery priority-{{dataService.formatClassName(item.name)}}"
                        [matTooltip]="getTooltip(item.name,item.count,item.percentage)"
                        [style.width.%]="item.percentage">
                    </div>
                    }
                </div>
            </div>
        </div>
    </div>

    <div class="work-container">
        <app-expandable-work-container (triggerbatteryRefresh)="refreshBattery()" [isExpanded]="expanded"
            [indicatorClass]="'state-' + dataService.formatClassName(todoList.stateName)"
            [workList]="workList"></app-expandable-work-container>
    </div>

</div>